<div class="container">
  <div class="page-header">
    <div class="container-fluid display-flex">
      <h3>Lista de filmes</h3>
      <div class="container-button">
        <%= link_to 'Novo filme', new_movie_path, class:'btn btn-primary' %>
      </div>
    </div>
  </div>
  <div class="whiteframe whiteframe-body" style="padding: 10px;">
    <%= form_tag(movies_path, method: :get) do %>
        <div class="row display-flex">
          <div class="col-sm-4 form-group">
            <label>Nome</label>
            <%= text_field_tag :name, params[:name], class: 'form-control' %>
          </div>
          <div class="col-sm-4 form-group">
            <label>Status</label>
            <%= select_tag(:status, options_for_select([['Aguardando', 'waiting'], ['Baixado', 'downloaded'], ['Assistido', 'watched']], params[:status]), class: 'form-control', include_blank: true) %>
          </div>
          <div class="col-sm-4 form-group" style="margin-top: auto;">
            <button type="submit" class="btn btn-default custom-button">Filtrar</button>
          </div>
        </div>
    <% end%>
      <div class="table-height">
        <table class="table" cellspacing="0" width="100%" style="margin-top: 10px;">
          <thead>
          <tr>
            <th>Nome</th>
            <th width="12%" style="text-align: center;">Data lan√ßamento</th>
            <th width="5%" style="text-align: center;">Status</th>
            <th style="text-align: center; width: 70px;">Options</th>
          </tr>
          </thead>

          <tbody>
          <% @movies.each do |movie| %>
              <tr class="<%= color_for movie %>">
                <td>
                  <%= link_to movie_path(movie) do %>
                      <div style="height: 100%; width: 100%;">
                        <%= movie.name %>
                      </div>
                  <% end %>
                </td>
                <td style="text-align: center;">
                    <%= movie.release_date.strftime("%d/%m/%Y") %>
                </td>
                <td style="text-align: center;">
                  <span class="glyphicon <%= icon_for movie %>"></span>
                </td>
                <td align="center">
                  <%= link_to edit_movie_path(movie), style:'margin-right:15px;' do %>
                      <span class="glyphicon glyphicon-pencil"></span>
                  <% end %>
                  <%= link_to movie_path(movie), method: :delete, data: { confirm: 'Are you sure?' } do %>
                      <span class="glyphicon glyphicon-trash"></span>
                  <% end %>
                </td>
              </tr>
          <% end %>
          </tbody>
        </table>
      </div>
      <div class="display-flex center">
        <%= paginate @movies %>
      </div>
  </div>
</div>